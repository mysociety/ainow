{% extends 'ainow/base.html' %}
{% load staticfiles %}

{% block title %}{{ schedule.name }}{% endblock %}

{% block bodyclasses %}standard-page{% endblock %}

{% block content %}
<div class="general-content">
  <div class="container standard-layout standard-layout--flipped">
    <div class="general-content__page schedule">
      <h1>{{ schedule.name }} Schedule</h1>
      <div class="schedule__introduction">{{ schedule.introduction }}</div>
      <div class="row">
        <div class="standard-layout__primary-column">

          {% for date, day_schedule in days.items %}
            <h2>{{ date|date:"l jS" }}</h2>
            <ul class="schedule__list">
              {% for slot in day_schedule %}
                <h3>{{ slot.start|date:'H:i' }}</h3>
                <li class="schedule__list__item schedule-entry">
                  {% for session in slot.sessions.all %}
                    <p class="schedule-entry__room">
                      {% if session.room %}
                        &middot; {{ session.room }}
                      {% endif %}
                    </p>
                    {% for presentation in session.presentations.all %}
                      <h2 class="schedule-entry__title">
                        <a href="{% url 'presentation' schedule.slug presentation.slug %}">
                          {{ presentation.title }}
                        </a>
                      </h2>
                      <p class="schedule-entry__speaker">
                        {{ presentation.primary_speaker }}{% if presentation.additional_speakers %}{% for speaker in presentation.additional_speakers.all %}, {{ speaker.name }}{% endfor %}{% endif %}
                      </p>
                      <div class="schedule-entry__description">
                        {{ presentation.short_description }}
                      </div>
                    {% empty %}
                      <h2 class="schedule-entry__title">{{ session.name }}</h2>
                      <div class="schedule-entry__description">
                        {{ session.short_description }}
                      </div>
                    {% endfor %}
                  {% endfor %}
                </li>
              {% empty %}
                <li>This schedule doesn't have anything in it yet. Add some slots in the admin.</li>
              {% endfor %}
            </ul>
          {% endfor %}
          {% if footer_block %}
            <div class="schedule__footer">
              {{ footer_block }}
            </div>
          {% endif %}
        </div>
        <div class="standard-layout__secondary-column">
          {{ sidebar_block }}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
